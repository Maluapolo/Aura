<ion-content [fullscreen]="true" class="ion-padding custom-background">
  <div class="background-overlay"></div>

  <div class="main-content">
    <div class="search-bar-container">
      <ion-searchbar
        mode="md"
        placeholder="Pesquisar cidade..."
        class="custom-searchbar"
        [(ngModel)]="city"
        (keyup.enter)="getWeatherByCity()"
      ></ion-searchbar>
    </div>

    <div class="current-weather" *ngIf="weatherData && !isLoadingWeather && !weatherError">
      <h2 class="city-name">{{ weatherData.name }}</h2>
      <h1 class="temperature">{{ weatherData.main.temp.toFixed(0) }}°</h1>
      <p class="description">{{ weatherData.weather[0].description | titlecase }} {{ weatherData.main.temp_max.toFixed(0) }}°/{{ weatherData.main.temp_min.toFixed(0) }}°</p>

      <div class="additional-weather-details">
        <p>Humidade: {{ weatherData.main.humidity }}%</p>
        <p>Pressão: {{ weatherData.main.pressure }} hPa</p>
        <p>Vento: {{ weatherData.wind.speed.toFixed(1) }} m/s</p>
        <p>Nuvens: {{ weatherData.clouds.all }}%</p>
      </div>
    </div>

    <div *ngIf="isLoadingWeather" class="ion-text-center loading-message">
      <ion-spinner name="circles"></ion-spinner>
      <p>Carregando clima...</p>
    </div>

    <div *ngIf="weatherError" class="ion-text-center error-display">
      <p class="error-message">{{ weatherError }}</p>
    </div>

    <ion-card class="forecast-card" *ngIf="forecastData && forecastData.length > 0">
      <ion-card-header class="forecast-header">
        <div class="forecast-title-container">
          <ion-icon name="calendar-outline" class="calendar-icon"></ion-icon>
          <ion-card-title class="forecast-title">Previsão para 3 dias</ion-card-title>
        </div>
      </ion-card-header>
      <ion-card-content class="forecast-content">
        <div class="forecast-day" *ngFor="let day of forecastData">
          <span class="day-name">{{ day.name }}</span>
          <img [src]="'http://openweathermap.org/img/wn/' + day.icon + '@2x.png'" alt="Weather Icon" class="day-icon">
          <div class="temp-range">
            <span class="temp-max">{{ day.maxTemp.toFixed(0) }}°</span>
            <span class="temp-min">{{ day.minTemp.toFixed(0) }}°</span>
          </div>
        </div>
      </ion-card-content>
    </ion-card>
  </div>

</ion-content>